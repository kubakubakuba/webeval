{% extends "codemirror.html" %}

{% block title %}
	{{ task_name }}
{% endblock title %}

{% block content %}
	<style>
		.back-link {
			display: inline-flex;
			align-items: center;
			margin-bottom: 20px;
			color: var(--link-color);
			text-decoration: none;
		}

		.back-link:hover {
			text-decoration: underline;
		}

		.card-btn:hover {
			background-color: #f8f9fa;
		}
	</style>

	<a href="/task/{{ task_id }}" class="back-link">
		<svg width="20" height="20" style="vertical-align: middle; margin-right: 5px;">
			<use href="/static/sprites.svg#back"></use>
		</svg>
		Back to Task
	</a>

	<h2>{{ best_or_latest }} for task: {{ task_name }}</h2>
	<h5>User: {% if displayname and displayname != username %}{{ displayname }} ({{ username }}){% else %}{{ username }}{% endif %}</h5>
	<div class="card">
		<div class="card-body">
			<div id="codeMirror"></div>
		</div>
	</div>
{% endblock content %}

{% block cmirror %}
	<script>
		let submissionContent = {{submission_code|tojson}};

		let editor = CodeMirror(document.getElementById("codeMirror"), {
			lineNumbers: true,
			mode: "gas",
			lineWrapping: true,
			viewportMargin: Infinity,
			value: submissionContent,
			readOnly: true,
			{% if user_theme and user_theme != 'default' %}theme: "{{ user_theme }}"{% endif %}
		});

		editor.setSize("auto", "auto");
	</script>
{% endblock %}