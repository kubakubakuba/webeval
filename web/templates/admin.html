{% extends "base.html" %}

{% block title %}
Admin panel
{% endblock title %}

{% block content %}
	<style>

		.form-select{
			margin: 15px 0px 15px 0px;
		}

		.card-btn{
			margin-bottom: 15px;
		}

		.main-content{
			max-width: 5000px!important;
		}
	</style>

	<!--
		{'Simple addition': [('test2', 6, 2), ('test', 6, 1)], 'Memory read and write': [('test', 5, 1)], 'Bubble sort': [('test', 1293, 1)], 'Cache optimization': [('test', 886, 1)], 'Data hazard prevention': [('test', 469, 1)], 'Print hexadecimal to serial port': [('test', 168, 1)], 'Simple calculator': [('test', 458, 1)]}
		create a table for each task, and in each task, create a table for the first 6 users
	-->

	<div class="row">
		<div class="col-md-6">
			<h2>Top 6 submissions for each task:</h2>
			{% for task, submissions in submissions.items() %}
				<h3>{{ task }}</h3>
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col">Userid</th>
							<th scope="col">Username</th>
							<th scope="col">Cycles</th>
							<th scope="col">Score</th>
						</tr>
					</thead>
					<tbody>
						{% for submission in submissions[:6] %}
							<tr>
								<td>{{ submission[2] }}</td>
								<td>{{ submission[0] }}</td>
								<td>{{ submission[1] }}</td>
								<td>{{ submission[3] }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			{% endfor %}
		</div>
		<div class="col-md-6">
			Ban a user:
			<select id="ban-user-selector" class="form-select" aria-label="Ban user selector">
				<option value="-">-</option>
				{% for user in users[::-1] %}
					{% if user[4] != '_banned_'%}
						<option value="{{ user[0] }}">{{ user[0] }}: {{ user[1] }}</option>
					{% endif %}
				{% endfor %}
			</select>
			<div class="card card-btn" onclick="location.href='/admin/ban/' + document.getElementById('ban-user-selector').value;">
				<div class="card-body text-center">
					Ban user
				</div>
			</div>
			
			Unban a user:
			<select id="unban-user-selector" class="form-select" aria-label="Unban user selector">
				<option value="-">-</option>
				{% for user in users[::-1] %}
					{% if user[4] == '_banned_' %}
						<option value="{{ user[0] }}">{{ user[0] }}: {{ user[1] }}</option>
					{% endif %}
				{% endfor %}
			</select>
			<div class="card card-btn" onclick="location.href='/admin/unban/' + document.getElementById('unban-user-selector').value;">
				<div class="card-body text-center">
					Unban user
				</div>
			</div>
		</div>
	</div>

{% endblock content %}